<DOCTYPE html>
<html>
  <head>
    <title>AxonBridge Example</title>
  </head>
  <body>

    <!-- Manually include jQuery, since it's huge and CDN-able -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    
    <!-- Include the main Axon Bridge client library -->
    <script type="text/javascript" src="../lib/bridge-client.js"></script>
    
    <!-- Include your own API definition library -->
    <script type="text/javascript" src="api.js"></script>
    
    <!-- Do something with your API! -->
    <script type="text/javascript">
      
      // AxonBridge Initialization
      // This function bootstraps the module with the required constructor arguments.
      ( function () {
      
          // =====
          // SETUP
          // =====

          // Attempt to load up a locally stored Bridge configuration:
          if ( !AxonBridge.initFromStoredBridge() ) {

            // Or connect using the appropriate constructor arguments:
            //                ============ API URL =============  TIMEOUT
            AxonBridge.init( 'https://192.168.2.34:3000/api/1.0/', 10000 );

          }
          
          // You can listen for each request:
          AxonBridge.onRequestPresend = function ( method, resource, payload ) {
            console.log( "Request >> " + method + " resource " + resource + " = " + JSON.stringify( payload ) );
          };

          // =====
          // USAGE
          // =====

          // Attempt to load up a locally stored user identity and login with that:
          if ( !AxonBridge.loginAsStoredIdentity() ) {

            // Or just call the API manually to log in with the given credentials:
            api.login.get( 'first@domain.com', 'gr33np3pp3r', true );

          }

      } )();
      
    </script>
  </body>
</html>