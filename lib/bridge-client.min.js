!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Bridge=e()}}(function(){var e;return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t){var n=(e("./include/json3"),e("./include/jstorage"),e("./include/sha256"),e("./Identity"));t.exports=function(){"use strict";var e={},t=null,r=function(){t=null},o=function(){e.user=null,e.additionalData=null},i=function(){return null!==t},a=function(n,r,o,a){"function"==typeof e.onRequestCalled&&e.onRequestCalled(n,r,o);var s=null;if(null!==a&&"object"==typeof a)s=a;else{if(i()!==!0)return e.debug===!0&&console.warn("BRIDGE | Request | Request cannot be sent. No user credentials available."),null;s=t}var u=new jQuery.Deferred,c="GET"===n.toUpperCase()?"payload=":"";return c+=JSON.stringify(s.createRequest(o)),jQuery.ajax({type:n,url:e.url+r,data:c,dataType:"json",contentType:"application/json",headers:{Accept:"application/json"},timeout:e.timeout,async:!0}).done(function(e,t,n){return"object"!=typeof e||"object"!=typeof e.content?void u.reject({status:417,message:"417 (Expectation Failed) Malformed message."},n):void u.resolve(e,n)}).fail(function(e){var t=Bridge.isErrorCodeResponse(e);null!==t?u.reject(t,e):u.reject({status:0,message:"0 (Timeout) No response from the server."},e)}),u.promise()},s=function(r,o){"function"==typeof e.onFChangePassword&&e.onChangePassword();var i=CryptoJS.SHA256(r).toString(CryptoJS.enc.Hex),s=CryptoJS.SHA256(o).toString(CryptoJS.enc.Hex);r=null,o=null;var u=new jQuery.Deferred,c=function(n,r){return"string"!=typeof n.content.message?void l({status:417,message:"417 (Expectation Failed) Malformed message."},r):(g(t.email,s,!0),e.debug===!0&&console.log("BRIDGE | Forgot Password | "+n.content.message),void u.resolve(n,r))},l=function(e,t){Bridge.debug===!0&&console.error("BRIDGE | Forgot Password | "+e.status.toString()+" >> "+e.message),u.reject(e,t)},f={password:s},d=new n(t.email,i,!0);return a("POST","change-password",f,d).done(c).fail(l),u.promise()},u=function(t){"function"==typeof e.onForgotPassword&&e.onForgotPassword(t);{var r=new jQuery.Deferred,o=function(t,n){return"string"!=typeof t.content.message?void i({status:417,message:"417 (Expectation Failed) Malformed message."},n):(e.debug===!0&&console.log("BRIDGE | Forgot Password | "+t.content.message),void r.resolve(t,n))},i=function(e,t){Bridge.debug===!0&&console.error("BRIDGE | Forgot Password | "+e.status.toString()+" >> "+e.message),r.reject(e,t)},s={email:t};new n(t,"",!0)}return a("POST","forgot-password",s,null).done(o).fail(i),r.promise()},c=function(t,n,r,i){"function"==typeof e.onLoginCalled&&e.onLoginCalled(t,r);var s=i===!0?n:CryptoJS.SHA256(n).toString(CryptoJS.enc.Hex);n=null;var u=new jQuery.Deferred,c=function(n,r){return"object"!=typeof n.content.user||"object"!=typeof n.content.additionalData?void l({status:417,message:"417 (Expectation Failed) Malformed login package."},r):(e.debug===!0&&console.log("BRIDGE | Login | "+JSON.stringify(n.content)),h(n.content.user,n.content.additionalData),e.useLocalStorage&&(jQuery.jStorage.set("bridge-client-identity",JSON.stringify({email:t,password:s})),jQuery.jStorage.setTTL("bridge-client-identity",864e5)),void u.resolve(n,r))},l=function(e,t){o(),Bridge.debug===!0&&console.error("BRIDGE | Login | "+e.status.toString()+" >> "+e.message),u.reject(e,t)},f={};return e.useLocalStorage=r,g(t,s,!0),a("GET","login",f,null).done(c).fail(l),u.promise()},l=function(t,r,o){"function"==typeof e.onRecoverPasswordCalled&&e.onRecoverPasswordCalled(t,o);var i=CryptoJS.SHA256(r).toString(CryptoJS.enc.Hex);r=null;var s=new jQuery.Deferred,u=function(t,n){return"string"!=typeof t.content.message?void c({status:417,message:"417 (Expectation Failed) Malformed message."},n):(e.debug===!0&&console.log("BRIDGE | Recover Password | "+t.content.message),void s.resolve(t,n))},c=function(e,t){Bridge.debug===!0&&console.error("BRIDGE | Recover Password | "+e.status.toString()+" >> "+e.message),s.reject(e,t)},l={hash:o,password:i},f=new n(t,"",!0);return a("POST","recover-password",l,f).done(u).fail(c),s.promise()},f=function(t,r,o,i,s){"function"==typeof e.onRegisterCalled&&e.onRegisterCalled(t,o,i,s);var u=CryptoJS.SHA256(r).toString(CryptoJS.enc.Hex);r=null;var c=new jQuery.Deferred,l=function(t,n){return"string"!=typeof t.content.message?void f({status:417,message:"417 (Expectation Failed) Malformed message."},n):(e.debug===!0&&console.log("BRIDGE | Register | "+t.content.message),void c.resolve(t,n))},f=function(e,t){Bridge.debug===!0&&console.error("BRIDGE | Register | "+e.status.toString()+" >> "+e.message),c.reject(e,t)},d={email:t,password:u,"first-name":o,"last-name":i,"app-data":s},g=new n(t,"",!0);return a("PUT","register",d,g).done(l).fail(f),c.promise()},d=function(t,r){"function"==typeof e.onVerifyEmailCalled&&e.onVerifyEmailCalled(t,r);var o=new jQuery.Deferred,i=function(t,n){return"string"!=typeof t.content.message?void s({status:417,message:"417 (Expectation Failed) Malformed message."},n):(e.debug===!0&&console.log("BRIDGE | Verify Email | "+t.content.message),void o.resolve(t,n))},s=function(e,t){Bridge.debug===!0&&console.error("BRIDGE | Verify Email | "+e.status.toString()+" >> "+e.message),o.reject(e,t)},u={hash:r},c=new n(t,"",!0);return a("POST","verify-email",u,c).done(i).fail(s),o.promise()},g=function(e,r,o){t=new n(e,r,o)},h=function(t,n){e.user=t,e.additionalData=n};return e.additionalData=null,e.debug=!1,e.timeout=1e4,e.url="",e.useLocalStorage=!1,e.user=null,e.onChangePasswordCalled=null,e.onForgotPasswordCalled=null,e.onLoginCalled=null,e.onLogoutCalled=null,e.onRecoverPasswordCalled=null,e.onRegisterCalled=null,e.onRequestCalled=null,e.onVerifyEmailCalled=null,e.init=function(t,n){e.url=t,e.timeout=n},e.isErrorCodeResponse=function(e){if(e.status>=400&&e.status<600)switch(e.status){case 400:return{status:400,message:"400 (Bad Request) >> Your request was not formatted correctly."};case 401:return{status:401,message:"401 (Unauthorized) >> You do not have sufficient priveliges to perform this operation."};case 403:return{status:403,message:"403 (Forbidden) >> Your email and password do not match any user on file."};case 404:return{status:404,message:"404 (Not Found) >> The resource you requested does not exist."};case 409:return{status:409,message:"409 (Conflict) >> A unique database field matching your PUT may already exist."};case 500:return{status:500,message:"500 (Internal Server Error) >> An error has taken place in the Bridge server."};case 503:return{status:503,message:"503 (Service Unavailable) >> The Bridge server may be stopped."};default:return{status:e.status,message:"Error! Something went wrong!"}}return null},e.isLoggedIn=function(){return null!==e.user},e.logout=function(){r(),o(),jQuery.jStorage.deleteKey("bridge-client-identity"),"function"==typeof e.onLogoutCalled&&e.onLogoutCalled()},e.request=function(e,t,n){return a(e,t,n,null)},e.requestChangePassword=function(e,t){return s(e,t)},e.requestForgotPassword=function(e){return u(e)},e.requestLogin=function(e,t,n){return c(e,t,n,!1)},e.requestLoginStoredIdentity=function(){var t=jQuery.jStorage.get("bridge-client-identity",null);if(null!==t){var n=JSON.parse(t);return e.debug===!0&&console.log("Stoed identity: "+JSON.stringify(n)),c(n.email,n.password,!0,!0)}return null},e.requestRecoverPassword=function(e,t,n){l(e,t,n)},e.requestRegister=function(e,t,n,r,o){return f(e,t,n,r,o)},e.requestVerifyEmail=function(e,t){return d(e,t)},e}},{"./Identity":2,"./include/json3":4,"./include/jstorage":5,"./include/sha256":6}],2:[function(e,t){e("./include/hmac-sha256"),e("./include/json3"),e("./include/sha256");t.exports=function(e,t,n){"use strict";var r={},o=n===!0?t:CryptoJS.SHA256(t).toString(CryptoJS.enc.Hex);t=null;var i=function(e){var t=JSON.stringify(e.content),n=e.email,r=e.time.toISOString(),i=t+n+r;return e.hmac=CryptoJS.HmacSHA256(i,o).toString(CryptoJS.enc.Hex),Bridge.debug===!0&&(console.log("=== HMAC Signing Process ==="),console.log('Hashpass: "'+o+'"'),console.log('Content: "'+t+'"'),console.log('Email: "'+n+'"'),console.log('Time: "'+r+'"'),console.log('Concat: "'+i+'"'),console.log('HMAC: "'+e.hmac+'"'),console.log("============================")),e};return r.email=e,r.createRequest=function(t){return i({content:t,email:e,time:new Date})},r}},{"./include/hmac-sha256":3,"./include/json3":4,"./include/sha256":6}],3:[function(){var e=e||function(e,t){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var o=0;e>o;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;e>o;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++){var o=t[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,o=e.min(4*t,o),t){for(var u=0;t>u;u+=i)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=o}return new a.init(u,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(t){for(var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,r=n.algo,a=[],s=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var f;e:{f=c;for(var d=t.sqrt(f),g=2;d>=g;g++)if(!(f%g)){f=!1;break e}f=!0}f&&(8>l&&(a[l]=u(t.pow(c,.5))),s[l]=u(t.pow(c,1/3)),l++),c++}var h=[],r=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],u=n[4],c=n[5],l=n[6],f=n[7],d=0;64>d;d++){if(16>d)h[d]=0|e[t+d];else{var g=h[d-15],p=h[d-2];h[d]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+h[d-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+h[d-16]}g=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[d]+h[d],p=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),f=l,l=c,c=u,u=a+g|0,a=i,i=o,o=r,r=g+p|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(r),n.HmacSHA256=i._createHmacHelper(r)}(Math),function(){var t=e,n=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,u=a.words,c=0;r>c;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}()},{}],4:[function(t,n,r){(function(t){(function(){function o(e,t){function n(e){if(n[e]!==y)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,l="function"==typeof u&&m;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===u(0)&&"0"===u(new r)&&'""'==u(new i)&&u(w)===y&&u(y)===y&&u()===y&&"1"===u(a)&&"[1]"==u([a])&&"[null]"==u([y])&&"null"==u(null)&&"[null,null,null]"==u([y,w,null])&&u({a:[a,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===u(null,a)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(f){l=!1}}o=l}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){a=d(s);var g=5==a.a.length&&1===a.a[0];if(g){try{g=!d('"	"')}catch(f){}if(g)try{g=1!==d("01")}catch(f){}if(g)try{g=1!==d("1.")}catch(f){}}}}catch(f){g=!1}o=g}}return n[e]=!!o}e||(e=u.Object()),t||(t=u.Object());var r=e.Number||u.Number,i=e.String||u.String,s=e.Object||u.Object,c=e.Date||u.Date,l=e.SyntaxError||u.SyntaxError,f=e.TypeError||u.TypeError,d=e.Math||u.Math,g=e.JSON||u.JSON;"object"==typeof g&&g&&(t.stringify=g.stringify,t.parse=g.parse);var h,p,y,_=s.prototype,w=_.toString,m=new c(-0xc782b5b800cec);try{m=-109252==m.getUTCFullYear()&&0===m.getUTCMonth()&&1===m.getUTCDate()&&10==m.getUTCHours()&&37==m.getUTCMinutes()&&6==m.getUTCSeconds()&&708==m.getUTCMilliseconds()}catch(v){}if(!n("json")){var S="[object Function]",j="[object Date]",b="[object Number]",C="[object String]",B="[object Array]",T="[object Boolean]",x=n("bug-string-char-index");if(!m)var O=d.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],P=function(e,t){return A[t]+365*(e-1970)+O((e-1969+(t=+(t>1)))/4)-O((e-1901+t)/100)+O((e-1601+t)/400)};if((h=_.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=w?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),p=function(e,t){var n,r,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)h.call(r,o)&&i++;return n=r=null,i?p=2==i?function(e,t){var n,r={},o=w.call(e)==S;for(n in e)o&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,o=w.call(e)==S;for(n in e)o&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(e,t){var n,o,i=w.call(e)==S,s=!i&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)i&&"prototype"==n||!s.call(e,n)||t(n);for(o=r.length;n=r[--o];s.call(e,n)&&t(n));}),p(e,t)},!n("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E="000000",R=function(e,t){return(E+(t||0)).slice(-e)},H="\\u00",L=function(e){for(var t='"',n=0,r=e.length,o=!x||r>10,i=o&&(x?e.split(""):e);r>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[a];break;default:if(32>a){t+=H+R(2,a.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},J=function(e,t,n,r,o,i,a){var s,u,c,l,d,g,_,m,v,S,x,A,D,E,H,N;try{s=t[e]}catch(M){}if("object"==typeof s&&s)if(u=w.call(s),u!=j||h.call(s,"toJSON"))"function"==typeof s.toJSON&&(u!=b&&u!=C&&u!=B||h.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&1/0>s){if(P){for(d=O(s/864e5),c=O(d/365.2425)+1970-1;P(c+1,0)<=d;c++);for(l=O((d-P(c,0))/30.42);P(c,l+1)<=d;l++);d=1+d-P(c,l),g=(s%864e5+864e5)%864e5,_=O(g/36e5)%24,m=O(g/6e4)%60,v=O(g/1e3)%60,S=g%1e3}else c=s.getUTCFullYear(),l=s.getUTCMonth(),d=s.getUTCDate(),_=s.getUTCHours(),m=s.getUTCMinutes(),v=s.getUTCSeconds(),S=s.getUTCMilliseconds();s=(0>=c||c>=1e4?(0>c?"-":"+")+R(6,0>c?-c:c):R(4,c))+"-"+R(2,l+1)+"-"+R(2,d)+"T"+R(2,_)+":"+R(2,m)+":"+R(2,v)+"."+R(3,S)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if(u=w.call(s),u==T)return""+s;if(u==b)return s>-1/0&&1/0>s?""+s:"null";if(u==C)return L(""+s);if("object"==typeof s){for(E=a.length;E--;)if(a[E]===s)throw f();if(a.push(s),x=[],H=i,i+=o,u==B){for(D=0,E=s.length;E>D;D++)A=J(D,s,n,r,o,i,a),x.push(A===y?"null":A);N=x.length?o?"[\n"+i+x.join(",\n"+i)+"\n"+H+"]":"["+x.join(",")+"]":"[]"}else p(r||s,function(e){var t=J(e,s,n,r,o,i,a);t!==y&&x.push(L(e)+":"+(o?" ":"")+t)}),N=x.length?o?"{\n"+i+x.join(",\n"+i)+"\n"+H+"}":"{"+x.join(",")+"}":"{}";return a.pop(),N}};t.stringify=function(e,t,n){var r,o,i,s;if(a[typeof t]&&t)if((s=w.call(t))==S)o=t;else if(s==B){i={};for(var u,c=0,l=t.length;l>c;u=t[c++],s=w.call(u),(s==C||s==b)&&(i[u]=1));}if(n)if((s=w.call(n))==b){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else s==C&&(r=n.length<=10?n:n.slice(0,10));return J("",(u={},u[""]=e,u),o,i,r,"",[])}}if(!n("json-parse")){var N,M,I=i.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw N=M=null,l()},z=function(){for(var e,t,n,r,o,i=M,a=i.length;a>N;)switch(o=i.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=x?i.charAt(N):i[N],N++,e;case 34:for(e="@",N++;a>N;)if(o=i.charCodeAt(N),32>o)U();else if(92==o)switch(o=i.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[o],N++;break;case 117:for(t=++N,n=N+4;n>N;N++)o=i.charCodeAt(N),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||U();e+=I("0x"+i.slice(t,N));break;default:U()}else{if(34==o)break;for(o=i.charCodeAt(N),t=N;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++N);e+=i.slice(t,N)}if(34==i.charCodeAt(N))return N++,e;U();default:if(t=N,45==o&&(r=!0,o=i.charCodeAt(++N)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(N+1),o>=48&&57>=o)&&U(),r=!1;a>N&&(o=i.charCodeAt(N),o>=48&&57>=o);N++);if(46==i.charCodeAt(N)){for(n=++N;a>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==N&&U(),N=n}if(o=i.charCodeAt(N),101==o||69==o){for(o=i.charCodeAt(++N),(43==o||45==o)&&N++,n=N;a>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==N&&U(),N=n}return+i.slice(t,N)}if(r&&U(),"true"==i.slice(N,N+4))return N+=4,!0;if("false"==i.slice(N,N+5))return N+=5,!1;if("null"==i.slice(N,N+4))return N+=4,null;U()}return"$"},k=function(e){var t,n;if("$"==e&&U(),"string"==typeof e){if("@"==(x?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=z(),"]"!=e;n||(n=!0))n&&(","==e?(e=z(),"]"==e&&U()):U()),","==e&&U(),t.push(k(e));return t}if("{"==e){for(t={};e=z(),"}"!=e;n||(n=!0))n&&(","==e?(e=z(),"}"==e&&U()):U()),(","==e||"string"!=typeof e||"@"!=(x?e.charAt(0):e[0])||":"!=z())&&U(),t[e.slice(1)]=k(z());return t}U()}return e},q=function(e,t,n){var r=G(e,t,n);r===y?delete e[t]:e[t]=r},G=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(w.call(o)==B)for(r=o.length;r--;)q(o,r,n);else p(o,function(e){q(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return N=0,M=""+e,n=k(z()),"$"!=z()&&U(),N=M=null,t&&w.call(t)==S?G((r={},r[""]=n,r),"",t):n}}}return t.runInContext=o,t}var i="function"==typeof e&&e.amd,a={"function":!0,object:!0},s=a[typeof r]&&r&&!r.nodeType&&r,u=a[typeof window]&&window||this,c=s&&a[typeof n]&&n&&!n.nodeType&&"object"==typeof t&&t;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(u=c),s&&!i)o(u,s);else{var l=u.JSON,f=u.JSON3,d=!1,g=o(u,u.JSON3={noConflict:function(){return d||(d=!0,u.JSON=l,u.JSON3=f,l=f=null),g}});u.JSON={parse:g.parse,stringify:g.stringify}}i&&e(function(){return g})}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(){!function(){function e(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(t){}if(e)try{window.localStorage&&(S=window.localStorage,C="localStorage",x=S.jStorage_update)}catch(o){}else if("globalStorage"in window)try{window.globalStorage&&(S="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],C="globalStorage",x=S.jStorage_update)}catch(i){}else{if(j=document.createElement("link"),!j.addBehavior)return void(j=null);j.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(j);try{j.load("jStorage")}catch(a){j.setAttribute("jStorage","{}"),j.save("jStorage"),j.load("jStorage")}var u="{}";try{u=j.getAttribute("jStorage")}catch(c){}try{x=j.getAttribute("jStorage_update")}catch(d){}S.jStorage=u,C="userDataBehavior"}s(),l(),n(),f(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&r()},!1)}function t(){var e="{}";if("userDataBehavior"==C){j.load("jStorage");try{e=j.getAttribute("jStorage")}catch(t){}try{x=j.getAttribute("jStorage_update")}catch(n){}S.jStorage=e}s(),l(),f()}function n(){"localStorage"==C||"globalStorage"==C?"addEventListener"in window?window.addEventListener("storage",r,!1):document.attachEvent("onstorage",r):"userDataBehavior"==C&&setInterval(r,1e3)}function r(){var e;clearTimeout(T),T=setTimeout(function(){if("localStorage"==C||"globalStorage"==C)e=S.jStorage_update;else if("userDataBehavior"==C){j.load("jStorage");try{e=j.getAttribute("jStorage_update")}catch(t){}}e&&e!=x&&(x=e,o())},25)}function o(){var e,n=w.parse(w.stringify(v.__jstorage_meta.CRC32));t(),e=w.parse(w.stringify(v.__jstorage_meta.CRC32));var r,o=[],a=[];for(r in n)if(n.hasOwnProperty(r)){if(!e[r]){a.push(r);continue}n[r]!=e[r]&&"2."==String(n[r]).substr(0,2)&&o.push(r)}for(r in e)e.hasOwnProperty(r)&&(n[r]||o.push(r));i(o,"updated"),i(a,"deleted")}function i(e,t){if(e=[].concat(e||[]),"flushed"==t){e=[];for(var n in B)B.hasOwnProperty(n)&&e.push(n);t="deleted"}for(var r=0,o=e.length;o>r;r++){if(B[e[r]])for(var i=0,a=B[e[r]].length;a>i;i++)B[e[r]][i](e[r],t);if(B["*"])for(var i=0,a=B["*"].length;a>i;i++)B["*"][i](e[r],t)}}function a(){var e=(+new Date).toString();if("localStorage"==C||"globalStorage"==C)try{S.jStorage_update=e}catch(t){C=!1}else"userDataBehavior"==C&&(j.setAttribute("jStorage_update",e),j.save("jStorage"));r()}function s(){if(S.jStorage)try{v=w.parse(String(S.jStorage))}catch(e){S.jStorage="{}"}else S.jStorage="{}";b=S.jStorage?String(S.jStorage).length:0,v.__jstorage_meta||(v.__jstorage_meta={}),v.__jstorage_meta.CRC32||(v.__jstorage_meta.CRC32={})}function u(){g();try{S.jStorage=w.stringify(v),j&&(j.setAttribute("jStorage",S.jStorage),j.save("jStorage")),b=S.jStorage?String(S.jStorage).length:0}catch(e){}}function c(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return!0}function l(){var e,t,n,r,o=1/0,s=!1,c=[];if(clearTimeout(m),v.__jstorage_meta&&"object"==typeof v.__jstorage_meta.TTL){e=+new Date,n=v.__jstorage_meta.TTL,r=v.__jstorage_meta.CRC32;for(t in n)n.hasOwnProperty(t)&&(n[t]<=e?(delete n[t],delete r[t],delete v[t],s=!0,c.push(t)):n[t]<o&&(o=n[t]));1/0!=o&&(m=setTimeout(Math.min(l,o-e,2147483647))),s&&(u(),a(),i(c,"deleted"))}}function f(){var e,t;if(v.__jstorage_meta.PubSub){var n,r=A;for(e=t=v.__jstorage_meta.PubSub.length-1;e>=0;e--)n=v.__jstorage_meta.PubSub[e],n[0]>A&&(r=n[0],d(n[1],n[2]));A=r}}function d(e,t){if(O[e])for(var n=0,r=O[e].length;r>n;n++)try{O[e][n](e,w.parse(w.stringify(t)))}catch(o){}}function g(){if(v.__jstorage_meta.PubSub){for(var e=+new Date-2e3,t=0,n=v.__jstorage_meta.PubSub.length;n>t;t++)if(v.__jstorage_meta.PubSub[t][0]<=e){v.__jstorage_meta.PubSub.splice(t,v.__jstorage_meta.PubSub.length-t);break}v.__jstorage_meta.PubSub.length||delete v.__jstorage_meta.PubSub}}function h(e,t){v.__jstorage_meta||(v.__jstorage_meta={}),v.__jstorage_meta.PubSub||(v.__jstorage_meta.PubSub=[]),v.__jstorage_meta.PubSub.unshift([+new Date,e,t]),u(),a()}function p(e,t){for(var n,r=e.length,o=t^r,i=0;r>=4;)n=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^n,r-=4,++i;switch(r){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o^=255&e.charCodeAt(i),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)}return o^=o>>>13,o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16),o^=o>>>15,o>>>0}var y="0.4.8",_=window.jQuery||window.$||(window.$={}),w={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||_.parseJSON||_.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||_.toJSON};if(!("parse"in w&&"stringify"in w))throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var m,v={__jstorage_meta:{CRC32:{}}},S={jStorage:"{}"},j=null,b=0,C=!1,B={},T=!1,x=0,O={},A=+new Date,P={isXML:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(n){}}return!1},decode:function(e){var t,n="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return n?(t=n.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),this.isXML(t)?t:!1):!1}};_.jStorage={version:y,set:function(e,t,n){if(c(e),n=n||{},"undefined"==typeof t)return this.deleteKey(e),t;if(P.isXML(t))t={_is_xml:!0,xml:P.encode(t)};else{if("function"==typeof t)return void 0;t&&"object"==typeof t&&(t=w.parse(w.stringify(t)))}return v[e]=t,v.__jstorage_meta.CRC32[e]="2."+p(w.stringify(t),2538058380),this.setTTL(e,n.TTL||0),i(e,"updated"),t},get:function(e,t){return c(e),e in v?v[e]&&"object"==typeof v[e]&&v[e]._is_xml?P.decode(v[e].xml):v[e]:"undefined"==typeof t?null:t},deleteKey:function(e){return c(e),e in v?(delete v[e],"object"==typeof v.__jstorage_meta.TTL&&e in v.__jstorage_meta.TTL&&delete v.__jstorage_meta.TTL[e],delete v.__jstorage_meta.CRC32[e],u(),a(),i(e,"deleted"),!0):!1},setTTL:function(e,t){var n=+new Date;return c(e),t=Number(t)||0,e in v?(v.__jstorage_meta.TTL||(v.__jstorage_meta.TTL={}),t>0?v.__jstorage_meta.TTL[e]=n+t:delete v.__jstorage_meta.TTL[e],u(),l(),a(),!0):!1},getTTL:function(e){var t,n=+new Date;return c(e),e in v&&v.__jstorage_meta.TTL&&v.__jstorage_meta.TTL[e]?(t=v.__jstorage_meta.TTL[e]-n,t||0):0},flush:function(){return v={__jstorage_meta:{CRC32:{}}},u(),a(),i(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=v,new e},index:function(){var e,t=[];for(e in v)v.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return b},currentBackend:function(){return C},storageAvailable:function(){return!!C},listenKeyChange:function(e,t){c(e),B[e]||(B[e]=[]),B[e].push(t)},stopListening:function(e,t){if(c(e),B[e]){if(!t)return void delete B[e];for(var n=B[e].length-1;n>=0;n--)B[e][n]==t&&B[e].splice(n,1)}},subscribe:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");O[e]||(O[e]=[]),O[e].push(t)},publish:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");h(e,t)},reInit:function(){t()},noConflict:function(e){return delete window.$.jStorage,e&&(window.jStorage=this),this}},e()}()},{}],6:[function(){var e=e||function(e,t){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var o=0;e>o;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;e>o;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++){var o=t[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes
},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,o=e.min(4*t,o),t){for(var u=0;t>u;u+=i)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=o}return new a.init(u,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(t){for(var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,r=n.algo,a=[],s=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var f;e:{f=c;for(var d=t.sqrt(f),g=2;d>=g;g++)if(!(f%g)){f=!1;break e}f=!0}f&&(8>l&&(a[l]=u(t.pow(c,.5))),s[l]=u(t.pow(c,1/3)),l++),c++}var h=[],r=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],u=n[4],c=n[5],l=n[6],f=n[7],d=0;64>d;d++){if(16>d)h[d]=0|e[t+d];else{var g=h[d-15],p=h[d-2];h[d]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+h[d-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+h[d-16]}g=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[d]+h[d],p=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),f=l,l=c,c=u,u=a+g|0,a=i,i=o,o=r,r=g+p|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(r),n.HmacSHA256=i._createHmacHelper(r)}(Math)},{}],7:[function(e,t){var n=e("./Bridge");t.exports=new n},{"./Bridge":1}]},{},[7])(7)});